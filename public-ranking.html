<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Classement ‚Äî MTB Points</title>
  <link rel="stylesheet" href="css/style.css" />
  <style>
    .right{text-align:right}
    table{width:100%;border-collapse:separate;border-spacing:0}
    thead th{
      text-align:left;
      font-size:12px;
      color:#64748b;
      padding:10px 12px;
      border-bottom:1px solid #e5e7eb;
      white-space:nowrap;
    }
    tbody td{
      padding:10px 12px;
      border-bottom:1px solid #e5e7eb;
      font-size:13px;
      vertical-align:top;
    }
    tbody tr:hover td{background:#fbfdff}
    tbody tr:last-child td{border-bottom:0}
    .muted{color:#64748b}
    .pill{
      display:inline-flex;align-items:center;gap:8px;
      padding:6px 10px;border:1px solid #e5e7eb;border-radius:999px;
      background:#fff;font-size:12px;color:#0f172a
    }
    .warn{
      border:1px solid #fde68a;
      background:#fffbeb;
      color:#92400e;
      padding:10px 12px;
      border-radius:12px;
      margin-top:12px;
      display:none;
    }
    .filtersRow{
      display:grid;
      grid-template-columns: 1.2fr 160px 260px 160px;
      gap:10px;
      align-items:end;
      margin-top:14px;
    }
    @media(max-width:980px){
      .filtersRow{grid-template-columns:1fr 1fr; }
    }
    .cardPad{padding:16px}
    .name a{font-weight:900;text-decoration:none}
    .name a:hover{text-decoration:underline}
  </style>
</head>

<body>
<header class="header">
  <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
    <h1>MTB Points ‚Äî Classement</h1>
    <span class="pill">Public</span>
  </div>

  <nav class="nav">
    <a href="index.html">Accueil</a>
    <a class="active" href="public-ranking.html">Classement</a>
    <a href="meetings.html">√âv√©nements</a>
    <a href="events.html">√âpreuves</a>
    <a href="about.html">√Ä propos</a>
  </nav>

  <div class="headerRight" style="display:flex;gap:8px;align-items:center;flex-wrap:wrap">
    <span class="pill">üë§ <span id="whoami">‚Äî</span></span>
    <button class="btn ghost" id="refreshBtn" type="button">‚Üª Rafra√Æchir</button>
  </div>
</header>

<main class="wrap">
  <div class="card">
    <div class="cardPad">
      <h2 style="margin:0">Classement mondial (points cumul√©s)</h2>
      <div class="muted" style="margin-top:6px">
        Cat√©gories UCI : filtre affich√© ‚ÄúU7 ‚Äî Poussin‚Ä¶‚Äù, et dans le tableau on affiche uniquement le code (U15, M3, ‚Ä¶).
      </div>

      <div id="supabaseWarning" class="warn"></div>

      <div class="filtersRow">
        <div>
          <label for="search">Recherche</label>
          <input id="search" type="text" placeholder="Nom du rider‚Ä¶" />
        </div>

        <div>
          <label for="sex">Sexe</label>
          <select id="sex">
            <option value="">Tous</option>
            <option value="M">Hommes</option>
            <option value="F">Femmes</option>
          </select>
        </div>

        <div>
          <label for="agecat">Cat√©gorie d‚Äô√¢ge</label>
          <select id="agecat"></select>
        </div>

        <div>
          <label>&nbsp;</label>
          <div class="pill" style="width:100%;justify-content:center">
            <span id="countLine">0 rider(s)</span>
          </div>
        </div>
      </div>
    </div>

    <div style="overflow:auto;border-top:1px solid #e5e7eb">
      <table>
        <thead>
          <tr>
            <th style="width:56px">#</th>
            <th>Rider</th>
            <th style="width:70px">Sex</th>
            <th style="width:90px">Cat</th>
            <th style="width:110px">Nation</th>
            <th class="right" style="width:110px">Points</th>
            <th class="right" style="width:90px">Races</th>
          </tr>
        </thead>
        <tbody id="tbody"></tbody>
      </table>
    </div>
  </div>
</main>

<!-- ‚úÖ Script module (Supabase + UCI categories) -->
<script type="module" src="js/public-ranking.js"></script>
</body>
</html>
